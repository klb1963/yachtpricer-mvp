üìã –ü–ª–∞–Ω —Ä–∞–±–æ—Ç: —Å–∫—Ä–∞–ø–∏–Ω–≥ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–∫ + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

1) –¶–µ–ª—å

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —è—Ö—Ç –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é –¥–ª—è –∫–∞–∂–¥–æ–π —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —è—Ö—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ ¬´–ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω –∏ —Å–∫–∏–¥–æ–∫¬ª –∏ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è.

‚∏ª

2) –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –∫–∞–∂–¥—É—é ¬´—è—Ö—Ç–∞√ó–Ω–µ–¥–µ–ª—è¬ª
	‚Ä¢	CompetitorPrice ‚Äî —Å—ã—Ä—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–ª–æ—â–∞–¥–æ–∫ (–æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É).
	‚Ä¢	CompetitorSnapshot ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã: TOP1, TOP3Avg, —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏, —Å–ª—É–∂–µ–±–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏.
	‚Ä¢	PricingDecision ‚Äî —Ä–µ—à–µ–Ω–∏–µ –ø–æ —Å–∫–∏–¥–∫–µ/–∏—Ç–æ–≥–æ–≤–æ–π —Ü–µ–Ω–µ, —Å—Ç–∞—Ç—É—Å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∞—É–¥–∏—Ç.

‚∏ª

3) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–æ—Ç–æ–∫
	1.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ–¥–µ–ª—é –≤ —Ç–∞–±–ª–∏—Ü–µ.
	2.	–î–ª—è –∫–∞–∂–¥–æ–π —Å–≤–æ–±–æ–¥–Ω–æ–π —è—Ö—Ç—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–µ–∂–µ—Å—Ç—å —Å–Ω–∞–ø—à–æ—Ç–∞:
	‚Ä¢	–Ω–µ—Ç ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º /scrape/start;
	‚Ä¢	–µ—Å—Ç—å ‚Äî –±–µ—Ä—ë–º –∏–∑ –ë–î.
	3.	–ü–æ—Å–ª–µ —Å–∫—Ä–∞–ø–∞ ‚Üí —Å—á–∏—Ç–∞–µ–º –∞–≥—Ä–µ–≥–∞—Ç—ã ‚Üí CompetitorSnapshot.
	4.	–í—ã—á–∏—Å–ª—è–µ–º ML‚Äë—Ä–µ–∫–æ–º (—ç–≤—Ä–∏—Å—Ç–∏–∫–∞/–º–æ–¥–µ–ª—å).
	5.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –°–∫–∏–¥–∫–∞ % –∏–ª–∏ –ò—Ç–æ–≥ ‚Ç¨ (–ø–æ–ª—è —Å–≤—è–∑–∞–Ω—ã).
	6.	–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ ‚Üí —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º ‚Üí —ç–∫—Å–ø–æ—Ä—Ç –≤ NauSYS.

‚∏ª

4) –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ç–±–æ—Ä–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–∫ (Boataround)
	‚Ä¢	–õ–æ–∫–∞—Ü–∏—è: —Å—Ç—Ä–∞–Ω–∞ (MVP ‚Äî HR).
	‚Ä¢	–¢–∏–ø: Sailing yacht (–º–æ–Ω–æ–∫–æ—Ä–ø—É—Å/monohull) –∏–ª–∏ Catamaran.
	‚Ä¢	–î–ª–∏–Ω–∞ (—Ñ—É—Ç—ã): —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä –∏–º–µ–Ω–Ω–æ –≤ —Ñ—É—Ç–∞—Ö, –¥–æ–ø—É—Å–∫–∏:
	‚Ä¢	< 40 ft ‚Äî ¬±1 ft,
	‚Ä¢	40‚Äì50 ft ‚Äî ¬±2 ft,
	‚Ä¢	> 50 ft ‚Äî ¬±3 ft.
	‚Ä¢	–ù–µ–¥–µ–ª—è: check‚Äëin —Å—É–±–±–æ—Ç–∞, check‚Äëout —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π.
	‚Ä¢	–ö–∞—é—Ç—ã/—Å–∞–Ω—É–∑–ª—ã: –¥–æ–ø—É—Å–∫ ¬±1 (—ç—Ç–∞–ø 2).
	‚Ä¢	(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –≥–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏, –º–∞—Ä–∫–∞/–º–æ–¥–µ–ª—å –¥–ª—è —Ç—é–Ω–∏–Ω–≥–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.

‚∏ª

5) –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (MVP)

–£–∂–µ –µ—Å—Ç—å
	‚Ä¢	ScrapeJob ‚Äî —Å—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á.
	‚Ä¢	CompetitorPrice ‚Äî —Å—ã—Ä—ã–µ —Ü–µ–Ω—ã.

–î–æ–±–∞–≤–∏—Ç—å
model CompetitorSnapshot {
  id          String   @id @default(uuid())
  yachtId     String
  weekStart   DateTime
  source      ScrapeSource
  top1Price   Decimal
  top3Avg     Decimal
  currency    String
  sampleSize  Int
  rawStats    Json?
  collectedAt DateTime @default(now())
  createdAt   DateTime @default(now())

  @@unique([yachtId, weekStart, source])
}

enum DecisionStatus {
  DRAFT
  SUBMITTED
  APPROVED
  REJECTED
}

model PricingDecision {
  id          String         @id @default(uuid())
  yachtId     String
  weekStart   DateTime
  basePrice   Decimal
  top1        Decimal?
  top3        Decimal?
  mlReco      Decimal?
  discountPct Decimal?
  finalPrice  Decimal?
  status      DecisionStatus @default(DRAFT)
  approvedBy  String?
  approvedAt  DateTime?
  notes       String?
  auditJson   Json?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([yachtId, weekStart])
}

6) API (—ç—Ç–∞–ø—ã)

Scrape / –∞–≥—Ä–µ–≥–∞—Ü–∏—è
	‚Ä¢	POST /scrape/start ‚Äî –∑–∞–ø—É—Å–∫; –≤—Ö–æ–¥: {yachtId, weekStart, source}.
	‚Ä¢	GET  /scrape/status?jobId=... ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏.
	‚Ä¢	GET  /scrape/competitors-prices?yachtId=&week= ‚Äî —Å—ã—Ä—ã–µ —Ü–µ–Ω—ã.
	‚Ä¢	POST /scrape/aggregate ‚Äî –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç CompetitorPrice ‚Üí CompetitorSnapshot.

–¢–∞–±–ª–∏—Ü–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
	‚Ä¢	GET  /pricing/rows?week=... ‚Äî —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ (—Å–∫–ª–µ–π–∫–∞ Yacht + Slot + Snapshot + Decision).
	‚Ä¢	PATCH /pricing/decision ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∫–∏–¥–∫—É/–∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É (–¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç).
	‚Ä¢	POST /pricing/submit ‚Äî —Å—Ç–∞—Ç—É—Å ‚Üí SUBMITTED.
	‚Ä¢	POST /pricing/approve ‚Äî —Å—Ç–∞—Ç—É—Å ‚Üí APPROVED (+ —à—Ç–∞–º–ø—ã).

‚∏ª

7) –õ–æ–≥–∏–∫–∞ ML‚Äë—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–ø—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ)
	‚Ä¢	–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–≥–µ—Ç = min(TOP3Avg - Œî, TOP1 - Œ¥), –≥–¥–µ Œî, Œ¥ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100‚Äì200‚Ç¨).
	‚Ä¢	–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≥–æ–¥—É (–Ω–æ–≤–µ–µ ‚Üí –º–æ–∂–Ω–æ –¥–æ—Ä–æ–∂–µ), –ø–æ –±—Ä–µ–Ω–¥—É/–º–∞—Ä–∫–µ, –ø–æ –ª–æ–∫–∞—Ü–∏–∏.
	‚Ä¢	–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ (–ø–æ—Ä–æ–≥), –Ω–∏–∂–µ –Ω–µ –æ–ø—É—Å–∫–∞—Ç—å—Å—è.

‚∏ª

8) –§—Ä–æ–Ω—Ç–µ–Ω–¥
	‚Ä¢	–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö ‚Äî GET /pricing/rows.
	‚Ä¢	–ö–æ–ª–æ–Ω–∫–∏: –¢–µ–∫—É—â–∞—è ‚Ç¨, TOP1, TOP3, ML‚Äë—Ä–µ–∫–æ–º, –°–∫–∏–¥–∫–∞ %, –ò—Ç–æ–≥ ‚Ç¨, –°—Ç–∞—Ç—É—Å.
	‚Ä¢	–î–≤–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –ø–æ–ª—è: –°–∫–∏–¥–∫–∞ % ‚Üî –ò—Ç–æ–≥ ‚Ç¨ (–≤–∑–∞–∏–º–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç).
	‚Ä¢	–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π: ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª, ¬´–£—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª (—Å —Ä–æ–ª—è–º–∏).
	‚Ä¢	–ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö ‚Äî –∫–∞—Ä—Ç–æ—á–Ω—ã–π –≤–∏–¥, –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (—Ü–≤–µ—Ç/–∏–∫–æ–Ω–∫–∏).

‚∏ª

9) –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
	‚Ä¢	–°–ø—Ä–∏–Ω—Ç A (—Ç–µ—Ö–±–∞–∑–∞): –ø—Ä–æ–≤–∞–π–¥–µ—Ä BoataroundProvider (–∑–∞–≥–ª—É—à–∫–∞ ‚Üí —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä), –∞–≥—Ä–µ–≥–∞—Ü–∏—è, API —Å–Ω–∞–ø—à–æ—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ /pricing/rows (–±–µ–∑ —Å—Ç–∞—Ç—É—Å–æ–≤).
	‚Ä¢	–°–ø—Ä–∏–Ω—Ç B (–±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞): —Å—Ç–∞—Ç—É—Å—ã –∏ —Ä–æ–ª–∏, —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ ML‚Äë—Ä–µ–∫–æ–º, –∫–∞—é—Ç—ã/—Å–∞–Ω—É–∑–ª—ã, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç.
	‚Ä¢	–°–ø—Ä–∏–Ω—Ç C (UX/–æ—Ç—á—ë—Ç—ã): –ø–ª–∞–Ω/—Ñ–∞–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏, —ç–∫—Å–ø–æ—Ä—Ç, —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ UX.

‚∏ª

10) –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏
	‚Ä¢	–ï–¥–∏–Ω–∏—Ü—ã –¥–ª–∏–Ω—ã: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –º–µ—Ç—Ä–∞—Ö, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ —Ñ—É—Ç–∞—Ö; 1 –º = 3.28084 ft.
	‚Ä¢	–í–∞–ª—é—Ç–∞: —Ö—Ä–∞–Ω–∏—Ç—å –≤–∞–ª—é—Ç—É –∫–∞—Ä—Ç–æ—á–∫–∏; —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Äî –≤ EUR (–∫–æ–Ω–≤–µ—Ä—Å–∏—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
	‚Ä¢	–ö—ç—à: TTL 6‚Äì12 —á–∞—Å–æ–≤ –Ω–∞ CompetitorSnapshot.
	‚Ä¢	–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: CompetitorSnapshot(yachtId, weekStart, source); PricingDecision(yachtId, weekStart).

‚∏ª

11) –ë—ã—Å—Ç—Ä—ã–µ next‚Äësteps
	1.	–î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—ã CompetitorSnapshot, PricingDecision (–º–∏–≥—Ä–∞—Ü–∏—è).
	2.	–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å /scrape/aggregate –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ CompetitorSnapshot.
	3.	–ü–æ–¥–∞—Ç—å CompetitorSnapshot –≤ /pricing/rows.
	4.	–°–¥–µ–ª–∞—Ç—å –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è ¬´–°–∫–∏–¥–∫–∞ %¬ª ‚Üî ¬´–ò—Ç–æ–≥ ‚Ç¨¬ª.
	5.	–ö–Ω–æ–ø–∫–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª/¬´–£—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª ‚Äî —Å—Ç–∞—Ç—É—Å–Ω—ã–π –ø–æ—Ç–æ–∫.

‚∏ª

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –∫–æ–Ω–≤–µ—Ä—Å–∏—è –º–µ—Ç—Ä–æ–≤ ‚Üî —Ñ—É—Ç—ã
	‚Ä¢	feet = meters * 3.28084
	‚Ä¢	–î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–¥–±–æ—Ä–∞ –ø–æ –¥–ª–∏–Ω–µ (–≤ —Ñ—É—Ç–∞—Ö) –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∞ L:
	‚Ä¢	if L < 40 ‚Üí ¬±1 ft
	‚Ä¢	if 40 ‚â§ L ‚â§ 50 ‚Üí ¬±2 ft
	‚Ä¢	if L > 50 ‚Üí ¬±3 ft

‚∏ª

–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
	‚Ä¢	2025‚Äë08‚Äë14: –ø–µ—Ä–≤–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞ (—Å–∫—Ä–∞–ø–∏–Ω–≥ + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è + UX).

‚∏ª

–ê–≤—Ç–æ—Ä—ã

YachtPricer Team

‚∏ª

–ö–æ–º–º–∏—Ç

# –∫–æ–º–º–∏—Ç
git add docs/scraping-plan.md
git commit -m "docs: add end-to-end scraping + pricing integration plan (Boataround, snapshots, decisions, FE/BE API)"

# –ø—É—à
git push origin main