# 📊 YachtPricer: Таблица цен и поток принятия решений

---

## 🧮 Пример таблицы «Анализ цен и скидок»

| 🛥️ **Яхта**  | 📅 **Период**  | 📈 **Статус** | 💰 **Текущая €** | 🏆 **Конкуренты (TOP1/TOP3)**  | 🤖 **ML-реком** | 📉 **Скидка %**  | 🪙 **Итог €** | ✉️ **Утверждено**  |
| ------------ | ------------- | ------------- | ---------------- | ----------------------------- | --------------- | --------------- | ------------- | ----------------- |
| Mojito 48    | 03.07.2025    | Свободна      | 7200             | 6900 / 7100                   | 6820 (85%)      | 12              | 6336          | ✅                |
| Nirvana 48   | 03.07.2025    | Опция         | 7200             | 6800 / 7000                   | 6700 (80%)      | 15              | 6120          | ⬜                |
| Lagoon 42    | 03.07.2025    | Свободна      | 8200             | 7900 / 8000                   | 7750 (90%)      | 10              | 7380          | ✅                |

---

## 📈 Поток принятия решений

### 👩‍💻 Шаг 1 — Аналитик

* Открывает таблицу за выбранную неделю
* Сверяет «Текущая €» с «Конкуренты»
* Смотрит рекомендацию ML-реком

### 📝 Шаг 2 — Выбор скидки

* В поле «Скидка %» вручную редактирует процент
* Цель: итоговая цена ≈ ML-реком и < TOP3 конкурентов
* Проверяет итоговую цену и маржу

### 📤 Шаг 3 — Отправка на утверждение

* Нажимает «Отправить на утверждение»
* Таблица переходит в статус «ожидает согласования»

### 👨‍💼 Шаг 4 — Директор

* Заходит в таблицу
* Проверяет предложенные скидки, ML и итоговые цены
* Утверждает строки (или корректирует вручную)

### 📬 Шаг 5 — Передача в NauSYS

* Только утверждённые значения экспортируются и передаются в систему

---

📌 Этот процесс повторяется еженедельно для каждой новой недели и свободных яхт.

---

## 🔄 Как обновляется таблица?

### Когда и как появляются строки?

* Строка = яхта + неделя
* Аналитик видит только те яхты и недели, которые ещё можно управлять (свободные или в опции)
* Источник данных — NauSYS и текущие настройки флага last minute
* ML и данные конкурентов подтягиваются при открытии таблицы

### Когда пропадают строки?

* Когда яхта забронирована (сдана) — данные обновляются из NauSYS
* Когда неделя уже в прошлом
* Когда яхта исключена из программы last minute

### Сколько строк видит аналитик?

* Если у него 50 яхт — максимум 50 строк на неделю
* Обычно на неделю остаётся 15–30 строк, так как часть уже сдана

### Что с отображением сданных яхт?

* По умолчанию сданные яхты скрыты
* Можно включить чекбокс «Показывать сданные» для анализа план/факт
* Можно вынести отдельный отчёт «План/факт загрузки»

📌 UX-фраза:

> «На неделю 03.07.2025 в управлении у вас 27 яхт. Из них 12 уже сданы, 15 доступны для настройки скидок.»

---

## 📋 Экран «План/факт загрузки»

Экран отображает статус загрузки яхт по неделям для анализа эффективности скидок и загрузки флота.

### 📊 Таблица:

| 🛥️ Яхта    | 📅 Период   | 🎯 План  | ✅ Факт   | 📈 Загрузка % |
| ---------- | ---------- | -------- | -------- | ------------- |
| Mojito 48  | 03.07.2025 | Сдана    | Сдана    | 100%          |
| Nirvana 48 | 03.07.2025 | Свободна | Сдана    | 100%          |
| Lagoon 42  | 03.07.2025 | Свободна | Свободна | 0%            |

### 🔷 Функции:

* Фильтры по флоту, периоду, статусу (план/факт)
* Визуальные индикаторы (зелёный/красный) для отклонений
* Возможность выгрузки отчёта в Excel/PDF

📌 Цель: помочь оценить, насколько фактические бронирования соответствуют планируемым скидкам и целям по загрузке.

---

### 🖼️ Визуальные индикаторы и карточный вид

#### 🔷 Визуальные индикаторы:

* ✅ Зелёный значок — факт соответствует плану или выше
* ⚠️ Жёлтый значок — частично выполнено
* ❌ Красный значок — факт не достигнут

Пример отображения в таблице:

| 🛥️ Яхта    | 📅 Период   | 🎯 План  | ✅ Факт   | 📈 Загрузка % |
| ---------- | ---------- | -------- | -------- | ------------- |
| Mojito 48  | 03.07.2025 | Сдана    | Сдана    | ✅ 100%        |
| Nirvana 48 | 03.07.2025 | Свободна | Сдана    | ✅ 100%        |
| Lagoon 42  | 03.07.2025 | Свободна | Свободна | ❌ 0%          |

#### 🔷 Карточный вид (смартфоны):

──────────────────────────────
🛥️ Mojito 48
📅 03.07.2025
🎯 План: Сдана
✅ Факт: Сдана
📈 Загрузка: ✅ 100%
──────────────────────────────
🛥️ Lagoon 42
📅 03.07.2025
🎯 План: Свободна
✅ Факт: Свободна
📈 Загрузка: ❌ 0%
──────────────────────────────

📌 На смартфонах данные выводятся вертикально карточками, сохраняя цветовые индикаторы и статус.

---

## 🔷 Примеры фильтров

На всех экранах (Дешборд, План/факт, История) можно применять фильтры:

* 📅 Период: выбор недели или диапазона дат
* 🛥️ Яхта: по имени, типу, длине
* 📍 Флот/локация: Хорватия, Черногория и др.
* 🎯 Статус: Свободна / Опция / Сдана / Все
* 📈 Утверждение: Утверждено / Ожидает / Черновик
* 🔷 Last minute: Да / Нет

Фильтры размещаются в верхней части страницы или в выезжающей боковой панели на мобильных.

---

## 🗺️ Mockup панели навигации

#### Десктоп:

```
─────────────────────────────────────────────
YachtPricer ▷ Dashboard ▷ Период: 03.07.2025
─────────────────────────────────────────────
[Дешборд] [История] [План/факт] [Утверждение] [Настройки]   👤 Профиль
─────────────────────────────────────────────
```

#### Мобильный:

```
──────────────────────────────
YachtPricer ☰  👤
──────────────────────────────
☰ меню (выезжающее):
- Дешборд
- История
- План/факт
- Утверждение
- Настройки
```

📌 Панель навигации адаптивная: на десктопе видны все пункты, на мобильном — прячется под «гамбургер-меню».

---

🔄 Взаимосвязь полей «Скидка %» и «Итог €»

Поля «Скидка %» и «Итог €» взаимосвязаны и оба редактируемые. Аналитик может:

🔷 Шаг 1 — Ввести скидку:

Вводит значение в поле «Скидка %»

Система пересчитывает итоговую цену по формуле: Итог € = Базовая € × (1 - Скидка/100)

🔷 Шаг 2 — Ввести итоговую цену:

Может вручную изменить поле «Итог €», чтобы добиться маркетингово привлекательной цены

Система пересчитывает и обновляет поле «Скидка %» по формуле: Скидка % = (1 - Итог € / Базовая €) × 100

📌 Это позволяет аналитику подбирать как процент, так и «красивое» финальное число для предложения, повышая гибкость работы.


